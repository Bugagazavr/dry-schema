#!/usr/bin/env ruby
# frozen_string_literal: true

require 'optparse'
require 'bundler/setup'
require 'dry/schema'

module Types
  include Dry::Types.module
end

if ARGV.include?('--pry')
  require 'pry'

  class Context
    def schema(&block)
      Dry::Schema.define(&block)
    end

    def params(&block)
      Dry::Schema.Params(&block)
    end

    def json(&block)
      Dry::Schema.JSON(&block)
    end

    Pry.start(Context.new, prompt: [proc { "dry-schema> " }, proc { "dry-schema*>" }])
  end
else
  require 'irb'
  binding.irb
end